Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и их порядок вызовов.

```go
package main

import (
	"fmt"
)


func test() (x int) {
	defer func() {
		x++
	}()
	x = 1
	return
}


func anotherTest() int {
	var x int
	defer func() {
		x++
	}()
	x = 1
	return x
}


func main() {
	fmt.Println(test())
	fmt.Println(anotherTest())
}
```

Ответ:
```
2
1
```
В `test()` используется именованное возвращаемое значение, поэтому значение x изменяется в отложенной функции и только потом возвращается. В `anotherTest()`, напротив, используется неименованное возвращаемое значение, которое копируется при `return` и не изменяется отложенной функцией.

Использование `defer` помещает вызов функции в стек отложенного выполнения. Так как стек работает по `LIFO`, то вызовы будут выполняться в порядке, обратном порядку добавления в стек. Каждый вызов добавляется в стек с аргументами, оцененными в момент использования `defer`, и выполняется после установки возвращаемого значения оператором `return`, но перед тем, как функция вернется к вызывающей функции. Если `return` не установил возвращаемое значение - например, в случае с именованным возвращаемым значением - то `defer` может изменить возвращаемое значение перед возвращением функции к вызывающему объекту.